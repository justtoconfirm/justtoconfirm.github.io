<!DOCTYPE html>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="An introductory guide to setting up and using the WordPress CMS">

	<title>Codebox | Introduction to WordPress</title>

	<link rel="shortcut icon" type="image/ico" href="favicon/code.ico">
	<link rel="stylesheet" href="dist/css/main.css">
	<link rel="preload" href="fonts/darker-grotesque-v2-latin/darker-grotesque-v2-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
</head>
<body>

	<header role="banner">
		<a href="index.html">Home</a>

		<nav>
			<ul class="nav-list">
				<li class="nav-list__item">Item one</li>
				<li class="nav-list__item">Item two</li>
				<li class="nav-list__item">Item three</li>
			</ul>
		</nav>
	</header>

	<main role="main">

		<div class="intro">

			<div class="container">
				<div class="row">
					<div class="column">

						<h1 class="intro__heading">Introduction to WordPress</h1>

						<p class="intro__copy">WordPress (WP) is an open-source Content Management System (CMS) written in PHP and using a MySQL or MariaDB database.</p>

					</div><!-- / column -->
				</div><!-- / row -->
			</div><!-- / container -->

		</div><!-- / intro -->

		<div class="container">
			<div class="row">
				<div class="column">

					<section>

						<h2>Creating a Custom Post Type (CPT)</h2>

						<p>We are going to create a <strong>Custom Post Type (CPT)</strong> called Books.</p>

						<p>Within the <strong>functions.php</strong> file of your theme, add the following function to create a Custom Post Type. This will add a <strong>Books</strong> post type in the sidebar of the WordPress admin/edit screen.</p>

<pre>
	<code>

function my_first_post_type() {
	
	$args = array(
		'labels' => array(
			'name' => 'Books',
			'singlular_name' => 'Book',
		),
		'hierarchical' => true,
		'public' => true,
		'menu_icon' => 'dashicons-images-alt2',
		'has_archive' => true,
		'supports' => array(
			'title',
			'editor',
			'thumbnail'
		)
	);

	register_post_type('books', $args);
}

// WP fires this hook just before the website loads using 'init'
add_action('init', 'my_first_post_type');

	</code>
</pre>

						<h3>Display Posts from a Custom Post Type (CPT)</h3>
						<!-- https://wordpress.org/support/topic/display-custom-post-type-on-a-wordpress-page/ -->
						<!-- https://www.wpbeginner.com/wp-tutorials/how-to-create-custom-post-types-in-wordpress/ -->

						<p>Once the Custom Post Type (CPT) has been created, we can now display these posts onto a page.</p>

						<p>Open a template file in the themes folder - for simplicity, we can use the default theme template of <strong>page.php</strong> or <strong>index.php</strong> - and add the following code to list any posts added to our Books CPT:</p>

<pre>
	<code>

&lt;?php
	$args = array(
		'post_type' => 'books',
		'post_status' => 'publish',
		'posts_per_page' => 10,
	);

	$query = new WP_Query($args);

	if($query->have_posts()) :
		while($query->have_posts()) :

			$query->the_post();

			get_the_title();			// Post Title
			get_the_content();			// Post Content
			get_permalink();			// Post Permalink to link to the post

		endwhile;
	endif;

	wp_reset_postdata();

?&gt;

	</code>
</pre>

					</section>

					<section>
						<h2>Adding a Taxonomy</h2>
						<!-- https://www.proteusthemes.com/blog/displaying-custom-post-types-templates-querying/ -->

						<p>We can now add sub-categories to our Custom Post Type by creating a <strong>Taxonomy</strong> that can then be assigned to a post type.</p>

						<p>Open the <strong>functions.php</strong> file and add this code to create a Taxonomy for our Books Custom Post Type so we can add categories.</p>

<pre>
	<code>

function my_first_taxonomy() {
	
	$args = array(
		'labels' => array(
			'name' => 'Categories',
			'singular_name' => 'Category',
		),
		'public' => true,
		'hierarchical' => true,
	);

	register_taxonomy('book_category', array('books'), $args);
}

// WP fires this hook just before the website loads using 'init'
add_action('init', 'my_first_taxonomy');

	</code>
</pre>

						<p>Once created the Taxonomy of <strong>Categories</strong> should be displayed under the Books Custom Post Type in the WordPress admin/edit sidebar. We can now add categories for our books such as fiction and non-fiction.</p>

						<p>Now when we add a new Book post in the Custom Post Type, we can set it's category to be either fiction, non-fiction or any other category of book.</p>

						<h3>Display Posts with a Taxonomy</h3>

						<p>Within the <strong>page.php</strong> or <strong>index.php</strong> file, we can update our query to return posts that match a taxonomy. In this code example only posts that have the taxonomy category of <strong>fiction</strong> will be displayed on the page.</p>

<pre>
	<code>

&lt;?php
	$args = array(
		'post_type' => 'books',
		'post_status' => 'publish',
		'posts_per_page' => 10,
		'tax_query' => array(
			array(
				'taxonomy' => 'book_category',
				'field' => 'slug',
				'terms' => 'fiction'
			)
		),
	);

	$query = new WP_Query($args);

	if($query->have_posts()) :
		while($query->have_posts()) :

			$query->the_post();

			get_the_title();			// Post Title
			get_the_content();			// Post Content
			get_permalink();			// Post Permalink to link to the post

		endwhile;
	endif;

	wp_reset_postdata();

?&gt;

	</code>
</pre>

						<p>You may notice the <strong>wp_reset_postdata()</strong> method at the end of the code. This function resets back to the original loop when we use <strong>WP_Query</strong>, so will ensure everything works after we finish with our custom query. It's recommended to include this within your code.</p>
					</section>

					<section>
						<h2>Create a Template</h2>

						<p>In the root directory of your themes folder - <strong>wp-content/themes/themename/</strong> (<strong>themename</strong> is the name of the theme being used, as an example) - create an empty PHP file. This will be our template file. Add this code to the newly created PHP template file:</p>

<pre>
    <code>

&lt;?php

/*
	Template Name: Blog Template
	Template Post Type: post, page
*/

    </code>
</pre>

						<p>As this template will be used to display our Posts, the template will be namded <strong>blog-template.php</strong> within the <strong>wp-content/themes/themename/</strong> folder.</p>

						<h3>Apply the Template to a Page</h3>

						<p>Create a new page in the WordPress admin/edit dashboard. We will be calling this page <strong>Books</strong>. This page will be used to display our posts from within the <strong>Books Custom Post Type (CPT)</strong> we created earlier.</p>

						<p>Within the edit area of the Books page, we should now see a <strong>Template</strong> panel on the right-side of the WordPress admin/edit dashboard. The drop-down will allow us to select the Blog Template. Once selected, click the <strong>Update</strong> button to apply our <strong>Blog Template</strong> - <strong>blog-template.php</strong> - to our newly created Books page.</p>

						<h3>Display the Posts in our Template</h3>

						<p>Update the <strong>blog-template.php</strong> file to display the posts from within the <strong>Books Custom Post Type (CPT)</strong> with the taxonomy of <strong>fiction</strong>.</p>

<pre>
    <code>

&lt;?php

	/*
		Template Name: Blog Template
		Template Post Type: post, page
	*/

	$args = array(
		'post_type' => 'books',
		'post_status' => 'publish',
		'posts_per_page' => 10,
		'tax_query' => array(
			array(
				'taxonomy' => 'book_category',
				'field' => 'slug',
				'terms' => 'fiction'
			)
		),
	);

	$query = new WP_Query($args);

	if($query->have_posts()) :
		while($query->have_posts()) :

			$query->the_post();

			$title = get_the_title();
			$content = get_the_content();
			$link = get_permalink();

			echo $title;
			echo $content;
			echo $link;

		endwhile;
	endif;

	wp_reset_postdata();
	
?>
    </code>
</pre>

						<p>The code previously added to the <strong>page.php</strong> or <strong>index.php</strong> file can now be removed so the posts are not displayed on every page and/or post using the default template.</p>
					</section>

				</div><!-- / column -->
			</div><!-- / row -->
		</div><!-- / container -->

	</main>

	<footer>
		<a href="sitemap.html">Sitemap</a>
	</footer>

</body>
</html>