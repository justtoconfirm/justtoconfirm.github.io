<!DOCTYPE html>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="An introductory guide to Node & NPM">

	<title>Codebox - Node & NPM</title>

	<link rel="shortcut icon" type="image/ico" href="favicon/code.ico">
	<link rel="stylesheet" href="style/foundation.min.css">
	<link rel="stylesheet" href="style/main.css">
</head>
<body>

<main role="main">
	<div class="row">
		<div class="columns small-12 large-12">

			<h1>Node & NPM</h1>
            <!-- https://www.freecodecamp.org/news/npm-vs-npx-whats-the-difference/ -->
            <!-- https://www.freecodecamp.org/news/what-exactly-is-node-js-ae36e97449f5/ -->
            <!-- https://nodejs.dev/learn -->
            <!-- https://socket.io/get-started/chat -->
            <!-- https://freshman.tech/learn-node/ -->
            <!-- https://medium.com/codesphere-cloud/how-to-publish-your-first-npm-package-in-minutes-b3c2fbddad37 -->
            <!-- https://levelup.gitconnected.com/publish-react-components-as-an-npm-package-7a671a2fb7f -->
            <!-- https://www.npmjs.com/package/jawblia -->
            <!-- https://github.com/jawblia/npm-test -->

            <h2>Node</h2>

            <p>Node (Node.js) is an open-source JavaScript runtime environment that runs and is built on Chrome's V8 JavaScript engine and executes JavaScript code outside a web browser. Chrome's V8 is an open-source runtime engine written in C++. Node was created by Ryan Dahl.</p>

            <p>Node itself doesn't do anything, it's just another way to execute code using a JavaScript runtime. If you require Node to do something, such as to be a HTTP server, you have to write an HTTP server and use Node to run it. Node includes a number of libraries (<strong>modules</strong>) for adding functionality when needed. An example module is the built-in <strong>filesystem</strong> (<strong>fs</strong>) module making I/O easy.</p>

            <p>If Node is installed, your terminal can be used to confirm the version:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ node --version
    </pre>
</div>
<!-- / Terminal -->

            <p><strong>NVM (Node Version Manager)</strong> is recommended to be used to install Node as it allows different versions of Node to be installed and used easily for different projects.</p>

            <p>As an example, ensure that Node is installed on your machine and create a JavaScript file named <strong>app.js</strong> with the following JavaScript code inside:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
console.log('Hello World');
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Open your terminal, change the directory to the folder where you saved the app.js file and run the following command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ node app.js
    </pre>
</div>
<!-- / Terminal -->

            <p><strong>Hello World</strong> should appear in your terminal.</p>

            <p>The most commin example when using Node is a web server. Open a file named <strong>server.js</strong> and add the following code:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
const http = require('http')
const hostname = '127.0.0.1'
const port = 9123

const server = http.createServer((req, res) => {
    res.statusCode = 200
    res.setHeader('Content-Type', 'text/plain')
    res.end('Hello World\n')
})

server.listen(port, hostname, () => {
    console.log(`Server running at http://${hostname}:${port}/`)
})
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Here we're using the <strong>http module</strong> to create the server.</p>

            <p>Run the server using the terminal.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ node server.js
    </pre>
</div>
<!-- / Terminal -->

            <p>You can also use frameworks built on Node, such as <strong>Express</strong>, to create a server.</p>

            <h2>NPM (Node Package Manager)</h2>

            <p>NPM stands for <strong>Node Package Manager</strong>. It is the largest software package library in the world with over 600,000 packages. The Node installation comes with a Command Line Interface (CLI) for NPM which allows developers to interact with packages locally on their machines.</p>

            <p>NPM provides two main functionalities:</p>

            <ul>
                <li>Online repository for Node packages/modules that are searchable.</li>
                <li>A command-line utility that allows Node packages/modules to be installed and managed.</li>
            </ul>

            <p>From Node version <strong>0.6.3</strong>, NPM is now included with every version of Node. When you install Node you also install NPM. This will allow the <strong>npm</strong> command to be used in your terminal.</p>

            <p>Once Node has been installed, you can confirm the version of NPM installed in the terminal:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm --version
    </pre>
</div>
<!-- / Terminal -->

            <h2>Create a package.json file</h2>

            <p>Before you can install any packages or modules using NPM, you will need a <strong>package.json</strong> file to be created in the root of your project folder. This shortcut will create a package.json file for you:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm init -y
    </pre>
</div>
<!-- / Terminal -->

            <p>The package.json file will set the package version to be <strong>1.0.0</strong> by default. You can use NPM to update this version as a <strong>major</strong>, <strong>minor</strong> or <strong>patch</strong> update as you project develops.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm version major         # Update package.json version to 2.x.x
    $ npm version minor         # Update package.json version to x.2.x
    $ npm version patch         # Update package.json version to x.x.2
    </pre>
</div>
<!-- / Terminal -->

            <p>The package.json file lists all the packages installed within your project. When a project with a package.json file is pulled down from a repository (such as in GitHub), you will need to install the packages from NPM to generate the <strong>node_modules</strong> directory and <strong>package-lock.json</strong> file.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm install        # OR, npm i
    </pre>
</div>
<!-- / Terminal -->

            <h2>The engines property</h2>

            <p>Within your <strong>package.json</strong> file you may want to specify the recommended Node and NPM versions the project should use. This will display a warning during installation (and not build) in the terminal if the versions of Node and NPM being used are non-recommended.</p>

            <p>Open your package.json file and add the <strong>engines</strong> object:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
"engines": {
    "node": ">=10.17.0",
    "npm": ">=6.11.3"
},
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>In this example, we have set the recommended Node version to be <strong>10.17.0</strong> or higher and NPM to be <strong>6.11.3</strong> or higher.</p>

            <p>We can also set the <strong>engineStrict</strong> property to be true to be set this to be strict during installation and prevent the install should the versions of Node or NPM not adhere to the versions in the engines property. By default this is set to <strong>false</strong> leaving the engines object to be "advisory only".</p>

<pre>
    <code>
<!-- Just leave this line alone -->
"engineStrict": true,
"engines": {
    "node": ">=10.17.0",
    "npm": ">=6.11.3"
},
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Install & Update packages</h2>

            <p>Once a package.json file has been created, you can then install NPM packages. When you install a package a <strong>node_modules</strong> directory will be created containing the package and any dependencies. This will need to be omitted from your version control using a <strong>.gitignore</strong> file.</p>

            <p>To install a package as a <strong>devDependency</strong>, use the following command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm install &lt;PACKAGE_NAME&gt; --save-dev         # e.g. npm install webpack --save-dev
    </pre>
</div>
<!-- / Terminal -->

            <p>To install a package as a <strong>dependency</strong>, use this command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm install &lt;PACKAGE_NAME&gt; --save         # e.g. npm install react --save
    </pre>
</div>
<!-- / Terminal -->

            <p>To install a package <strong>globally</strong> (best avoided if possible):</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm install &lt;PACKAGE_NAME&gt; -g         # e.g. npm install yarn -g
    </pre>
</div>
<!-- / Terminal -->

            <p>Once installed, you may need to update your packages to a specific version and/or the latest version.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm install &lt;PACKAGE_NAME&gt;@versions         # e.g. npm install react@17.0.1 --save
    $ npm install &lt;PACKAGE_NAME&gt;@latest           # e.g. npm install react@latest --save           
    </pre>
</div>
<!-- / Terminal -->

            <h2>Scripts</h2>

            <p>Once an NPM package has been installed, you may want to create a script to run the package in your terminal. Open your package.json file and update the <strong>scripts</strong> object to add new script.</p>

            <p>In this example, we want to create a <strong>script</strong> called build to run <strong>Webpack</strong>:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
"scripts": {
    "build": "webpack"
},
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>In the default package.json setup you will already see a scripts object containing a <strong>test</strong> script.</p>

            <p>To run our <strong>build</strong> script, open your terminal and enter the following <strong>npm run</strong> command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm run build
    </pre>
</div>
<!-- / Terminal -->

            <p>You may want to create an <strong>alias</strong> for terminal commands in your <strong>.bash_profile</strong> config file to create a shorthand way of running terminal tasks and commands.</p>

            <h2>Checking for outdated packages</h2>

            <p>Packages may need to be updated. To check for any outdated packages in your project, use the following command in your project:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm outdated
    </pre>
</div>
<!-- / Terminal -->

            <h2>Checking installed packages</h2>

            <p>To check which NPM packages have been installed <strong>locally</strong>:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm list
    </pre>
</div>
<!-- / Terminal -->

            <p>To check which NPM packages have been installed <strong>globally</strong>:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm list -g --depth 0
    </pre>
</div>
<!-- / Terminal -->

            <h2>NPM Christmas Tree</h2>

            <p>If you want a special Christmas tree to appear in your terminal, enter the following command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm xmas
    </pre>
</div>
<!-- / Terminal -->

            <h2>Creating your own NPM packages</h2>

            <p>You can create your own NPM packages by following the instructions from <a href="https://www.freecodecamp.org/news/how-to-make-a-beautiful-tiny-npm-package-and-publish-it-2881d4307f78/" target="_blank" rel="noopener noreferrer">freeCodeCamp</a>.</p>
            <!-- https://medium.com/the-andela-way/build-and-publish-your-first-npm-package-a4daf0e2431 -->
            <!-- https://www.youtube.com/watch?v=J4b_T-qH3BY -->

            <p>Being by creating a repository to store your code within GitHub. Next, create a package.json file and a README.md file in your repository.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm init -y
    </pre>
</div>
<!-- / Terminal -->

            <p>In your package.json file, the main property will expose the main JavaScript file, usually index.js, for your project. Many modules in NPM are starting to expose their CSS entry files in their package.json files allowing tools to import the module from the <strong>node_modules</strong> directory.</p>

            <p>This is an example of the package.json from Bootstrap 4:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
"style": "dist/css/bootstrap.css",
"sass": "scss/bootstrap.scss",
"main": "dist/js/bootstrap.js",
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>An example <strong>index.js</strong> file containing a JavaScript module we can export as an NPM package may look like this:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
function isWds(string) {
    return string === 'WDS'
}

module.exports = isWds
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Once your module/package has been created, it's useful to test this locally on your own machine to confirm it works and check you can import the package before publishing to NPM.</p>

            <p>In your current folder where the module/package is located, enter the NPM <strong>link</strong> command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm link
    </pre>
</div>
<!-- / Terminal -->

            <p>This allows us to allow our package to be installed locally from this location.</p>

            <p>Next, create a seperate local folder/directory. Within our test folder, we can now link to the module locally using the NPM <strong>link</strong> command and specifying the name of the package/module. For example, our package is called <strong>jtc-test</strong>:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm link jtc-test
    </pre>
</div>
<!-- / Terminal -->

            <p>This will now generate a <strong>node_modules</strong> directory containing our <strong>jtc-test</strong> package in the test directory. Within this newly created node_modules folder you will find our code and a package.json file.</p>

            <p>As before, we have an index.js file inside our module. In our test folder create a file named <strong>script.js</strong> and we can test our module works.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
const isWds = require('is-wds')

console.log(isWds("WDS"))       // True
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Now we can publish our package. You will need to have an NPM account created and be logged into NPM via the terminal. Your email will need to be verified when you create the NPM account to avoid a 403 Forbidden error.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm login
    </pre>
</div>
<!-- / Terminal -->

            <p>We can now publish our package.</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm publish
    </pre>
</div>
<!-- / Terminal -->

            <p>You cannot create a package with the same name as another package that already exists. To get around this, we can create a <strong>scoped</strong> or <strong>namespaced</strong> package. Babel does this where all packages in NPM are prefixed with <strong>@babel</strong>.</p>

            <p>To do this, prefix your package name with your username:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
{
    "name": "@justtoconfirm/jtc-test"
}
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>By default, a namespaced package like this is set as <strong>private</strong>, but we want to make it <strong>public</strong>. So, when you publish a package with a namespace, use the terminal command:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm publish --access=public
    </pre>
</div>
<!-- / Terminal -->

            <p>To create a namespaced package.json file when creating a project:</p>

<!-- Terminal -->
<div class="terminal terminal--shadow">
    <div class="terminal__top">
        <div class="terminal__buttons">
            <span class="terminal__circle terminal__circle--red"></span>
            <span class="terminal__circle terminal__circle--yellow"></span>
            <span class="terminal__circle terminal__circle--green"></span>
        </div>
        <div class="terminal__title">bash -- 85x24</div>
    </div>
    <pre class="terminal__body">
<!-- Just leave this line alone -->
    $ npm init --scope=justtoconfirm
    </pre>
</div>
<!-- / Terminal -->

		</div>
	</div>
</main>

</body>
</html>