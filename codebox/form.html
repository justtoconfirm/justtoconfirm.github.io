<!DOCTYPE html>
<html lang="en-GB">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A guide to Form & Form Validation">

	<title>Codebox - Form & Form Validation</title>

	<link rel="shortcut icon" type="image/ico" href="favicon/code.ico">
	<link rel="stylesheet" href="style/foundation.min.css">
	<link rel="stylesheet" href="style/main.css">

    <style>
        input[type=email] {
        -webkit-appearance: none;
        appearance: none;
        padding: 10px;
        border: 1px solid #333;
        margin: 0;
        font-family: inherit;
        box-sizing: border-box;
    }

    label {
        display: block;
        font-weight: bold;
    }

    /* This is our style for the invalid fields */
    input:invalid {
        border-color: #900;
        background-color: #FDD;
    }

    input:focus:invalid {
        outline: none;
    }
    </style>
</head>
<body>

<main role="main">
	<div class="row">
		<div class="columns small-12 large-12">

			<h1>Form & Form Validation</h1>
            <!-- https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation -->
            <!-- https://zellwk.com/blog/check-empty-input-js/ -->
            <!-- https://developer.mozilla.org/en-US/docs/Learn/Forms/Sending_and_retrieving_form_data -->
            <!-- https://pageclip.co/blog/2018-02-20-you-should-use-html5-form-validation.html -->
            <!-- https://github.com/Pageclip/valid-form -->
            <!-- https://stackoverflow.com/questions/38301774/how-to-do-floating-of-labels-in-css -->
            <!-- https://www.w3schools.com/html/html_form_elements.asp -->

            <h2>The &lt;input&gt; element</h2>

            <p>The HTML <strong>&lt;input&gt;</strong> element is the most used form element. It can be displayed in many ways, depending on the <strong>type</strong> attribute used. The default value of the <strong>type</strong> attribute is "text".</p>

            <p>On mobile devices, the <strong>type</strong> attribute will determine the type of keyboard shown when the user interacts with the input element.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="text"&gt;
&lt;input type="radio"&gt;
&lt;input type="checkbox"&gt;
&lt;input type="number"&gt;
&lt;input type="email"&gt;
&lt;input type="password"&gt;
&lt;input type="button"&gt;
&lt;input type="submit"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The characters in a <strong>password</strong> field are masked (shown as asterisks or circles).</p>

            <h2>The value attribute</h2>

            <p>The <strong>value</strong> attribute specifies an initial value for an input field.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="text" value="Dan"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>the name attribute</h2>

            <p>The <strong>name</strong> attribute specifies the name of an <strong>&lt;input&gt;</strong> element. It is used to reference elements in JavaScript, or to reference form data after a form is submitted.</p>

            <p>Only form elements with a name attribute will have their values passed when submitting a form.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="text" name="firstname"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>The placeholder attribute</h2>

            <p>The <strong>placeholder</strong> attribute specifies a short hint that describes the expected value of an input field. This hint is displayed in the input field before the user enters a value.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="email" placeholder="a@b.com"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>The readonly attribute</h2>

            <p>The <strong>readonly</strong> attribute specifies that a input field is read-only. The value of the field will still be sent when the form is submitted, however the field cannot be modified. The user can tab to the field, highlight the value and copy text from it.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="text" readonly&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>The disabled attribute</h2>

            <p>The <strong>disabled</strong> attribute specifies that an input field should be disabled. This field is then unusable and un-clickable. The value of a disabled field will not be sent when submitting the form.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="text" disabled&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Minimum & Maximum values</h2>

            <p>For number fields, those with the <strong>type</strong> attribute of <strong>number</strong> for example, the <strong>min</strong> and <strong>max</strong> attributes can be used to provide a range of valid values. If the field contains a value outside this range, it will be invalid.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="number" id="number" name="number" value="1" min="1" max="10"&gt;
&lt;input type="email" id="email-address" name="email-address" minlength="6" maxlength="8"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>The &lt;label&gt; element</h2>

            <p>The <strong>&lt;label&gt;</strong> element defines a label for form elements. This is useful for screen reader users, because the screen reader will read out when the user focus is on the input.</p>

            <p>The <strong>for</strong> attribute should be added to the <strong>&lt;label&gt;</strong> and should be equal to the id attribute of the <strong>&lt;input&gt;</strong> element to bind them together.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;label for="name">Name:&lt;/label&gt;
&lt;input type="text" id="name"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Wrapping the <strong>&lt;label&gt;</strong> around the input allows you to omit the id attribute on the input element.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;label&gt;
    &lt;input type="text" name="firstname"&gt;
&lt;/label&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Radio buttons</h2>

            <p>The <strong>&lt;input&gt;</strong> element with the <strong>type</strong> of <strong>radio</strong> can be used to define a radio button.</p>

            <p>Radio buttons must shate the same value in the <strong>name</strong> attribute so they can be grouped together. Selecting any radio button in that group automatically deselects any other selected radio button in the same group.</p>

            <p>The <strong>value</strong> attribute defines the unique value associated with each radio button. This value is not shown to the user, but the value is sent to the server when the form is submitted to idenfify which radio button was selected.</p>

            <p>Adding a <strong>&lt;label&gt;</strong> is recommended for accessibility.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="radio" id="male" name="gender" value="male"&gt;
&lt;label for="male"&gt;Male&lt;/label&gt;

&lt;input type="radio" id="female" name="gender" value="female"&gt;
&lt;label for="female"&gt;Female&lt;/label&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Checkbox</h2>

            <p>Setting the <strong>type</strong> of an <strong>&lt;input&gt;</strong> to <strong>checkbox</strong> will define a checkbox.</p>

            <p>The checkbox is shown as a square box that is ticket (checked) when active.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="checkbox" id="confirm" name="confirm" value="confirm"&gt;
&lt;label for="confirm"&gt;I confirm and agree with the T&Cs&lt;/label&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>&lt;button&gt;</h2>

            <p>The <strong>&lt;button&gt;</strong> tag defines a clickable button. Always specify the <strong>type</strong> attribute for a <strong>&lt;button&gt;</strong> element to tell the browser what type of button it is.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;button type="button">Button&lt;/button&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>If you include a <strong>&lt;button&gt;</strong> in a form element without specifying its a regular button - using the button type - it will default to a submit button.</p>

            <ul>
                <li><strong>button</strong> - the button is a clickable button</li>
                <li><strong>submit</strong> - the button is a submit button for submitting form data</li>
                <li><strong>reset</strong> - the button is a reset button to clear the form data to its initial values</li>
            </ul>

            <p>By default, HTML buttons are presented in a style resembling the platform the user agent runs on, but the styling can be amended using CSS.</p>

            <p>While the <strong>&lt;input&gt;</strong> elements with type button are still perfectly valid HTML, the newer <strong>&lt;button&gt;</strong> element is now thee favored way to create buttons.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;input type="button" value="Click me"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>The &lt;form&gt; element</h2>

            <p>Form elements should be wrapped between an opening &lt;form&gt; and closing &gt;/form&gt; tags. The &lt;form&gt; element is used to create an HTML form for user input.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form&gt;
    &lt;label for="name">Name:&lt;/label&gt;
    &lt;input type="text" id="name"&gt;
&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The <strong>action</strong> attribute defines the action to be performed when the form is submitted. Usually, the form data is sent to a file on the server when the user clicks the submit button. In the example below, the form submission is sent to a file called <strong>form-submission.php</strong> containing the server-side script that handles the form data.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form action="/form-submission.php"&gt;
    
    &lt;!-- Form field here --&gt;

&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The <strong>action</strong> attribute defines where the data gets sent, so it's value must be a valid URL. If a value is not provided, the data will be sent to the URL of the page containing the form.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;!-- Data sent to an absolute URL --&gt;
&lt;form action="https://secure-form.com"&gt;

&lt;!-- Data sent to a different URL on a server using a relative link --&gt;
&lt;form action="/form-submission"&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Using HTML5, the action attribute is not required if the submission is to be sent to the same page.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The <strong>method</strong> attribute specifies the HTTP method used when submitting the form data. The form data can be sent as URL parameters if using <strong>GET</strong> or as HTTP post transactions if using <strong>POST</strong>. The default HTTP method when submitting form data is GET.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form action="/form-submission.php" method="POST"&gt;
    
    &lt;!-- Form field here --&gt;

&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Always use <strong>POST</strong> if your form data contains sensitive or personal information.</p>

            <ul>
                <li><strong>GET</strong> appends the form data to the URL as parameters in name/value pairs. Do not send sensitive data using GET as the data, such as passwords, will be visible in the URL.</li>
                <li><strong>GET</strong> is limited to 2048 characters in the URL, <strong>POST</strong> has no size limitations so can be used to send large amounts of data when the form is submitted.</li>
                <li><strong>GET</strong> is useful for bookmarking page results and non-secure data, like search queries. We cannot bookmark form submissions using <strong>POST</strong>.</li>
                <li><strong>POST</strong> appends the form data inside the body of the HTTP request, the data is not visible in the URL.</li>
            </ul>

            <p>More information about URL parameters can be found <a href="url.html?page=url">here</a>.</p>

            <p>HTTP requests are never displayed to the user. To see HTTP requests you need to use Developer tools in your browser such as the Firefox Network Monitor or Chrome Developer Tools. As an example, open Chrome Developer Tools after submitting your form, the form data will be shown.</p>

            <ul>
                <li>Press F12 or Inspect your web page to open DevTools.</li>
                <li>Select the 'Network' tab.</li>
                <li>Select 'All'.</li>
                <li>In the 'Name' column select your website e.g. foo.com</li>
                <li>Select the 'Headers' tab (when it appears).</li>
            </ul>

            <p>The only thing displayed to the user is the URL called. With a <strong>GET</strong> request, the user will see the data, with a <strong>POST</strong> request they won't. We specify GET or POST methods within the <strong>method</strong> attribute of a <strong>&lt;form&gt;</strong> element.</p>

            <p>If the <strong>GET</strong> method is used for a form, you'll see the URL as something like:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
https://www.foo.com/?say=Hi&to=Mum
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The HTTP request would look like this:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
GET /?say=Hi&to=Mum HTTP/2.0
Host: foo.com
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>he <strong>POST</strong> method is the method the browser uses to talk to the server. If a form is sent using this method, the data is appended to the body of the HTTP request. When the form is submitted using the POST method, you get no data appended to the URL and the HTTP request looks like the following, with the data included in the request body:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
POST / HTTP/2.0
Host: foo.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 13

say=Hi&to=Mum
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The <strong>Content-Length</strong> header indicates the size of the body and the Content-Type header indicates the type of resource sent to the server.</p>

            <p>We can use the <strong>novalidate</strong> attribute on the <strong>&lt;form&gt;</strong> element to turn off the browser's automatic validation. This lets our JavaScript code take control over the validation. This won't disable support for the <strong>Constraint Validation API</strong> nor CSS pseudo classes. This means that even though the browser doesn't automatically check the validity of the form before sending the data, we can do it ourselves and style the form accordingly.</p>

            <p>The <strong>novalidate</strong> attribute on the form simply stops the form from showing its own error message bubbles and allows us to style the error messages using our own styling.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form novalidate&gt;
    
    &lt;!-- Form field here --&gt;

&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The <strong>autocomplete</strong> attribute specifies whether a form should have autocomplete on or off. When autocomplete is on, the browser automatically completes values based on values the user has entered before.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form autocomplete="on"&gt;
    
    &lt;!-- Form field here --&gt;

&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Styling HTML Forms</h2>

            <p>Using CSS we can position position the <strong>&lt;label&gt;</strong> above the input field and the <strong>&lt;button&gt;</strong> below the input field by setting the <strong>display</strong> property to be <strong>block</strong>.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
label,
button {
    display: block;
}
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Events to validate input</h2>

            <p>If you want to validate the input when a user types into the field, you can use the <strong>input</strong> event:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
const input = document.querySelector('input');

input.addEventListener('input', event => {
    // Validate input
})
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>If you want to validate the input when a user submits a form, you can use the <strong>submit</strong> event. Make sure you prevent the default behaviour with <strong>preventDefault</strong>. If you don't prevent the default behaviour, browsers will navigate to the URL stated in the action attribute.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
const input = document.querySelector('form');

form.addEventListener('submit', event => {
    event.preventDefault();
    
    // Validate input
})
<!-- Just leave this line alone -->
    </code>
</pre>

            <h2>Validation using JavaScript</h2>

            <p>You must use JavaScript if you want to take control over the look and feel of native error messages or to deal with legacy browsers that do no suppory the built-in HTML validation.</p>

            <p><a href="https://caniuse.com/constraint-validation" target="_blank" rel="noopener noreferrer">Most browsers support</a> the <strong>Constraint Validation API</strong> that consists of methods and properties.</p>

            <p>Let's start with some simple HTML:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form&gt;
    &lt;label for="email-address">E-mail:&lt;/label&gt;
    &lt;input type="email" id="email-address" name="email-address"&gt;
    &lt;button&gt;Submit&lt;/button&gt;
&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Next, add the following JavaScript to the page:</p>

<pre>
    <code>
<!-- Just leave this line alone -->
const email = document.getElementById('email-address');

email.addEventListener('input', function(event) {
    if (email.validity.typeMismatch) {
        email.setCustomValidity('Please enter a valid e-mail address');
    } else {
        email.setCustomValidity('');
    }
});
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>Here's the form:</p>

            <!-- Demo code -->
            <form>
                <label for="email-address">E-mail:</label>
                <input type="email" id="email-address" name="email-address">
                <button>Submit</button>
            </form>
            <!-- / Demo code -->

            <p>The JavaScript code will check whether the email input's <strong>validity.typeMismatch</strong> property returns <strong>true</strong>, meaning the contained value doesn't match the pattern for an email address. If so, the <strong>setCustomValidity()</strong> method is called so we can pass in a custom message. This renders the input invalid, so the form submission will fail.</p>

            <p>If the property returns a value of <strong>false</strong>, an empty string is returned, the form input is valid, so the form will submit.</p>

            <h2>HTML5 Validation Form</h2>
            <!-- https://pageclip.co/blog/2018-02-20-you-should-use-html5-form-validation.html -->

            <p>There are three categories of HTML5 form validation:</p>

            <ul>
                <li>HTML attributes on <strong>&lt;input&gt;</strong>, <strong>&lt;select&gt;</strong>, and <strong>&lt;textarea&gt;</strong> elements.</li>
                <li>CSS pseudo classes.</li>
                <li>JavaScript APIs.</li>
            </ul>

            <p>Begin by adding a required attribute to an <strong>&lt;input&gt;</strong> to ensure the user needs to add something into the input field. The type attribute is also set to allow only email addresses. As the input field is required, you cannot submit the form unless an email address is entered.</p>

            <p>The <strong>for</strong> attribute for the label needs to match the <strong>id</strong> of the input field.</p>

            <p>This is only HTML, no JavaScript.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
&lt;form&gt;
    
    &lt;label for="mail"&gt;Email:&lt;/label&gt;
    &lt;input id="mail" type="email" name="email" placeholder="a@b.com" required&gt;

    &lt;button&gt;Login&lt;/button&gt;

&lt;/form&gt;
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>There are a couple of CSS pseudo classes we can use to style the input:</p>

            <ul>
                <li><strong>:valid</strong> - when the input is valid</li>
                <li><strong>:invalid</strong> - when the input is invalid</li>
            </ul>

            <p>The most basic approach would be to change the border colour when the input is invalid.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
input:invalid {
    border-color: red;
}
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>This is not ideal.</p>

            <ul>
                <li>The input is required and initially empty, so on page load the input is <strong>:invalid</strong> and the border is red.</li>
                <li>The input is <strong>:invalid</strong> until you type a valid email address into the field, so it is always red when the user is typing.</li>
            </ul>

            <p>A better solution is to use the input's <strong>invalid</strong> event instead of using the <strong>:invalid</strong> pseudo CSS class selector, to add a CSS class for styling if the input is invalid. We can remove this CSS class when the element becomes valid once again.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
input.invalid {
    border-color: red;
}
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>And the JavaScript that will add the invalid class when the input is invalid.</p>

<pre>
    <code>
<!-- Just leave this line alone -->
const inputs = document.querySelectorAll('input, select, textarea')

inputs.forEach(function(input) {
    
    // Add a CSS class on submit when the input is invalid
    input.addEventListener('invalid', function() {
        input.classList.add('invalid')
    })

    // Remove the CSS class when the input becomes valid, this will fire each time user types
    input.addEventListener('input', function() {
        if (input.validity.valid) {
            input.classList.remove('invalid')
        }
    })

})
<!-- Just leave this line alone -->
    </code>
</pre>

            <p>The default error messaging will still apply.</p>

		</div>
	</div>
</main>

<script>
const email = document.getElementById('email-address');

email.addEventListener('input', function(event) {
    if (email.validity.typeMismatch) {
        email.setCustomValidity('Please enter a valid e-mail address');
    } else {
        email.setCustomValidity('');
    }
});
</script>

</body>
</html>