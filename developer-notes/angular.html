<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Developer Notes - Angular</title>

    <link rel="shortcut icon" type="image/ico" href="img/favicon/code.ico" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="preload" href="fonts/nunito-v9-latin-regular.woff2" as="font" type="font/woff2" crossorigin />
</head>
<body>

<!-- https://angular.io/guide/quickstart -->
<!-- https://angular.io/guide/architecture-components -->
<!-- https://blog.angularindepth.com/setting-up-angular-from-scratch-1f518c65d8ab -->
<!-- https://blog.angularindepth.com/upgrading-a-project-without-cli-to-angular-6-b07b105adc02 -->
<!-- https://blog.angular-university.io/getting-started-with-angular-setup-a-development-environment-with-yarn-the-angular-cli-setup-an-ide/ -->
<!-- https://www.sitepoint.com/angular-2-tutorial/ -->
<!-- https://www.sitepoint.com/ultimate-angular-cli-reference/ -->
<!-- https://medium.com/all-is-web/angular-5-creating-new-component-c6c5236f8024 -->
<!-- https://www.techiediaries.com/angular-tutorial-basics/ -->
<!-- https://www.devglan.com/angular/angular-7-crud-example -->
<!-- https://blog.angular-university.io/angular-2-firebase/ -->
<!-- https://www.toptal.com/angular/angular-5-tutorial -->

<header class="header" role="banner">
    <nav class="header__inner">
        <ul class="header__item header__item--links">
            <li class="header__link">
                <span class="header__link--background">
                    <a href="index.html">Home</a>
                </span>
            </li>
            <li class="header__link">
                <span class="header__link--background">
                    <a href="#main">Skip to content</a>
                </span>
            </li>
        </ul>
    </nav>
</header>

<main role="main" id="main">
    <h1>Angular</h1>

    <p>Angular is an MVC (Module View Controller) JavaScript framework created by Misko Hevery and maintained by Google. The first version of Angular is often referred to as AngularJS, whereas the latest version is known as Angular 2. The two versions are different in their structures and methods.</p>

    <p>Angular is one of the most popular front-end frameworks for building client-side web applications for mobile and desktop web. It follows a component-based architecture where each component is an isolated and reusable piece of code that controls a part of the app's UI.</p>

    <p>A component in Angular is a <a href="typescript.html">TypeScript</a> class decorated with the @Component decorator. It has an attached template and CSS stylesheet that forms the component's view.</p>

    <p>Even though Angular is a framework for the frontend, you will still need to choose a backend to go with it.</p>

    <p>It is worth checking to see if you have Node and NPM (Node Package Manager) installed.</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ node --version
$ npm --version
        </code>
    </pre>

    <h2>Dependency Injection (DI)</h2>

    <p>When working with Angular, you may come across the term Dependency Injection (DI). This is the concept of allowing developers to inject what's called services (singletons that encapsulates unique and reusable functionality within an application) into other components. This encourages re-usability of the code.</p>

    <h2>Setting up Angular from scratch</h2>

    <p>The CLI (Command Line Interface) is a great tool and time saver, but at the same time, it hides some of the internals from you. For instances, when you want to setup server-side rendering, you have to actually understand how things are wired together. The CLI also may install packages that you might not need during development. By having all packages installed, it's difficult to learn the minimal dependencies required to setup the simplest of Angular projects.</p>

    <p>You will need Node, NPM (Node Package Manager) and Git setup to implement this stage.</p>

    <h3>Create package.json</h3>

    <p>After we have created a new project folder/directory, we need to create a package.json file. You may also want to initialise Git at this stage of our project setup.</p>

    <pre>
        <code>
<!-- leave this line empty -->
# Create a new directory and cd into the folder
$ mkdir angular-project
$ cd angular-project

# Initialise Git
$ git init

# Setup package.json and accept the defaults
$ npm init -y
        </code>
    </pre>

    <h2>Install &amp; Getting Started - CLI</h2>

    <p>Before you begin, make sure your development environment includes NodeJS and NPM (Node Package Manager). Angular requires NodeJS version 8.x or 10.x</p>

    <p>Angular CLI is a command-line interface (CLI) to automate your development workflow. It will generate our components, services, router, and directives.</p>

    <p>Many recommend not using Angular CLI, often called angular-cli, for production applications as it is highly opinionated.</p>

    <p>We use the Angular CLI (Command Line Interface) to create projects, generate application and library code. We also use Angular CLI for a variety of development tasks such as testing, bundling, and deployment.</p>

    <p>The Angular CLI development server includes LiveReload support so your browser automatically reloads the application when a source file changes. Angular CLI generates <a href="typescript.html">Typescript</a> files.</p>

    <p>Any changes you make to the angular.json file will need a restart of the server to take effect.</p>

    <p>The official Angular documentation recommends installing the Angular CLI globally.</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ npm install @angular/cli -g
        </code>
    </pre>

    <p>This will install the ng command globally on your system. The following will be configured for you:</p>

    <ul>
        <li>NPM (Node Package Manager) dependencies are installed.</li>
        <li>TypeScript is configured for you.</li>
        <li>The Karma unit test runner is configured.</li>
        <li>The Protractor end-to-end test framework is configured.</li>
        <li>Environment files with default settings are created.</li>
    </ul>

    <p>Once installed, you can confirm the version installed:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng --version

# Alternative
$ ng version
        </code>
    </pre>

    <p>The following packages should be installed globally:</p>

    <ul>
        <li>Angular CLI</li>
        <li>@angular-devkit/architect</li>
        <li>@angular-devkit/core</li>
        <li>@angular-devkit/schematics</li>
        <li>@schematics/angular</li>
        <li>@schematics/update</li>
        <li>rxjs</li>
        <li>typescript</li>
    </ul>

    <p>You can execute the Karma test runner and run all unit tests using the following command:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng test
        </code>
    </pre>

    <h2>Angular Workspace</h2>

    <p>You develop apps in the context of an Angular workspace. A workspace contains the files for one or more projects. A project is the set of files that comprise an app.</p>

    <p>To create a new workspace and initial app project, run the following command in the terminal:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng new my-app
        </code>
    </pre>

    <p>The ng new command prompts you for information about features to include in the initial app project. Angular CLI will install the necessary Angular npm packages and other dependencies. The following workspace will be created:</p>

    <ul>
        <li>A new workspace, with a root folder named my-app</li>
        <li>An initial skeleton app project, also called my-app, within the src subfolder</li>
        <li>An end-to-end test project, within the e2e subfolder</li>
        <li>Related configuration files</li>
    </ul>

    <p>When working within the Angular application, we usually work within the 'src/app' directory.</p>

    <p>Within your application, the app.module.ts file is referred to as the root module.</p>

    <h2>Serve the application</h2>

    <p>Angular includes a server, so apps can easily be build and served locally.</p>

    <ul>
        <li>Go to the workspace folder, my-app</li>
        <li>Launch the server by using the CLI command 'ng serve', with the --open option.</li>
    </ul>

    <pre>
        <code>
<!-- leave this line empty -->
$ cd my-app
$ ng serve --open

# Alternative 
$ ng serve
        </code>
    </pre>

    <p>This will launch the server, watching your files for any changes, and will rebuild the app as changes are made to those files.</p>

    <p>The --open (or -o) option automatically opens your browser to <a href="http://localhost:4200/" target="_blank" rel="noopener noreferrer">http://localhost:4200/</a>. This is a built-in development server on port 4200</p>

    <p>You can alternatively use the serve command without the --open flag.</p>

    <p>You can alsouse different host addresses and ports if you wish:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng serve --host 0.0.0.0 --port 8080
        </code>
    </pre>

    <p>Your app should now be running. Behind the scenes, the following is happening:</p>

    <ul>
        <li>Angular CLI loads its configuration from .angular-cli.json</li>
        <li>Angular CLI runs Webpack to build and bundle all JavaScript and CSS code.</li>
        <li>Angular CLI starts the Webpack dev server to preview the result on localhost:4200</li>
    </ul>

    <p>The LiveReload support actively watches your 'src' directory for file changes.</p>

    <p>It's worth considering that the component.ts (TypeScript) files relate to the functionality of a component, the component.html and component.s(css) files are to style and structure the view of the component (what the user sees).</p>

    <h2>Adding Bootstrap</h2>

    <p>You may wish to include Bootstrap into your Angular application. This can be installed using NPM (Node Package Manager):</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ npm install bootstrap
        </code>
    </pre>

    <p>After that, Go to the angular.json file in the root of your application and replace the given code with "styles": [] array.</p>

    <pre>
        <code>
<!-- leave this line empty -->
"styles": [
    "node_modules/bootstrap/dist/css/bootstrap.min.css",
    "src/styles.css"
]
        </code>
    </pre>

    <h2>Components</h2>

    <p>Components are the fundamental building blocks of Angular applications. They display data on the screen, listen for user input, and take action based on input. They are the basic building blocks of an Angular application that controls part of the app's UI (User Interface). A component is also encapsulated and reusable.</p>

    <p>You can create a component by creating a TypeScript class and decorating with the @Component decorator available from the Angular core package (@angular/core).</p>

    <p>A component's view is built using a unique HTML template associated with the component's class and a stylesheet that is used to style the HTML view.</p>

    <p>Here is an example Angular component:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { Component } from '@angular/core';

@Component({
    selector: 'app-root',
    templateUrl: './app.component.html',
    styleUrls: ['./app.component.css']
})
export class AppComponent {
    title = 'angular7-router-demo';
}
        </code>
    </pre>

    <p>We start by importing Component from the Angular Core package and we can then use it to decorate the TypeScript class.</p>

    <p>The Angular CLI created the first Angular component, it is the root component and is named app-root</p>

    <p>When the Angular app first loads the page you see is the application shell. The shell is controlled by an Angular component named AppComponent. Open the project in an IDE and navigate to the src/app directory. You'll find the implementation of the shell AppComponent distrubuted over three files:</p>

    <ul>
        <li>src/app/app.component.ts - The component class code, written in TypeScript</li>
        <li>src/app/app.component.html - The component template, written in HTML</li>
        <li>src/app/app.component.(s)css - The component's private SCSS/CSS styles</li>
    </ul>

    <p>Within the src/app/app.component.html template, the content will be rendered as a placeholder. This is how the file will appear:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;!-- src/app/app.component.html --&gt;

&lt;!--The content below is only a placeholder and can be replaced.--&gt;
&lt;div style="text-align:center"&gt;
    &lt;h1&gt;Welcome to {{ title }}!&lt;/h1&gt;
    &lt;img width="300" alt="Angular Logo" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="&gt;
&lt;/div&gt;
&lt;h2&gt;Here are some links to help you start: &lt;/h2&gt;
&lt;ul&gt;
    &lt;li&gt;
        &lt;h2&gt;&lt;a target="_blank" rel="noopener" href="https://angular.io/tutorial"&gt;Tour of Heroes&lt;/a&gt;&lt;/h2&gt;
    &lt;/li&gt;
    &lt;li&gt;
        &lt;h2&gt;&lt;a target="_blank" rel="noopener" href="https://angular.io/cli"&gt;CLI Documentation&lt;/a&gt;&lt;/h2&gt;
    &lt;/li&gt;
    &lt;li&gt;
        &lt;h2&gt;&lt;a target="_blank" rel="noopener" href="https://blog.angular.io/"&gt;Angular blog&lt;/a&gt;&lt;/h2&gt;
    &lt;/li&gt;
&lt;/ul&gt;
        </code>
    </pre>

    <p>We can simply remove this placeholder code and simplify it to this (below), so we can display a simple text message on-screen:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;!-- src/app/app.component.html --&gt;

&lt;h1&gt;{{title}}&lt;/h1&gt;
        </code>
    </pre>

    <h3>The Page Title</h3>

    <p>Within the 'src' directory of your newly created Angular application, you'll find an index.html file. This is the main template where the Angular app is rendered. The root element for the Angular app will look something like this inside the &lt;body&gt; element:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;app-root&gt;&lt;/app-root&gt;
        </code>
    </pre>

    <p>Inside this file, you can change the page title that is currently defaulted to 'AngularApp'.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;!doctype html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;AngularApp&lt;/title&gt;
    &lt;base href="/"&gt;

    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
    &lt;link rel="icon" type="image/x-icon" href="favicon.ico"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;app-root&gt;&lt;/app-root&gt;
&lt;/body&gt;
&lt;/html&gt;
        </code>
    </pre>

    <p>So to change the page title within the &lt;title&gt; tag, just update the element:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;title&gt;My Angular App&lt;/title&gt;
        </code>
    </pre>

    <h3>app.component.ts code</h3>

    <p>Here is the initial app.component.ts code in-full:</p>

    <pre>
        <code>
<!-- leave this line empty -->
// src/app/app.component.ts

import { Component } from '@angular/core';

@Component({
    selector: 'app-root',
    templateUrl: './app.component.html',
    styleUrls: ['./app.component.css']
})
export class AppComponent {
    title = 'angular-app';
}
        </code>
    </pre>

    <h3>Changing the Application Text</h3>

    <p>Now that we have simplified the template, we can update the text we display on-screen.</p>

    <p>Open the component class file - src/app/app.component.ts - and change the value of the title property. In this example, let's change it to 'Hello World'.</p>

    <pre>
        <code>
<!-- leave this line empty -->
// src/app/app.component.ts

export class AppComponent {
    title = 'Hello World';
}
        </code>
    </pre>

    <p>The value of the title property will be displayed within the HTML template where the {{title}} expression is placed.</p>

    <p>This will change what is displayed on the page and not what's within the &lt;title&gt; element inside the HTML template.</p>

    <p>The double curly braces are Angular's interpolation binding syntax. This presents the component's title property value inside the HTML header tag.</p>

    <p>You always import the Component symbol from the Angular core library and annotate the component class with @Component. @Component is a decorator function that specifies the Angular metadata for the component. The metadata for a component tells Angular where to get the major building blocks that it needs to create and present the component and its view. In particular, it associates a template with the component. Together, the component and its template describe the view.</p>

    <p>In Angular, the component plays the part of the controller/viewmodel, and the template represents the view.</p>

    <p>A component controls a patch of screen called a view.</p>

    <h3>Generating new Components</h3>

    <p>Using the Angular CLI, we can generate new components. For example, lets create a new component called 'testcomponent'.</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate component testcomponent
        </code>
    </pre>

    <p>Angular CLI will create a new folder, src/app/testcomponent, and generates the three files of TestComponent. These files will are:</p>

    <ul>
        <li>testcomponent/testcomponent.component.html</li>
        <li>testcomponent/testcomponent.component.scss</li>
        <li>testcomponent/testcomponent.component.spec.ts</li>
        <li>testcomponent/testcomponent.component.ts</li>
    </ul>

    <p>If you view the app.module.ts, you will see that the module file will be updated with the new component created:</p>

    <pre>
        <code>
<!-- leave this line empty -->
// src/app/app.module.ts

import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';

import { AppComponent } from './app.component';
import { TestComponent } from './testcomponent/testcomponent.component';

@NgModule({
    declarations: [
        AppComponent,
        TestComponent
    ],
    imports: [
        BrowserModule
    ],
    providers: [],
    bootstrap: [AppComponent]
})
export class AppModule { }
        </code>
    </pre>

    <p>When we create the component using ng-generate, Angular CLI also imported our new component and added it into the declarations array of our AppModule. This essentially imports our component(s) into our application so we can use them.</p>

    <p>Our components should only focus on displaying the data and passing the data to other components that need it. We should use an API call to fetch data from a remote server. Our components should not do this, but we should use a service/services to do this.</p>

    <p>We can generate a service like so:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate service test --module=app
        </code>
    </pre>

    <p>This would generate a new TestService class.</p>

    <p>As most likely discussed previously, you always import the Component symbol from the Angular core library and annotate the component class with @Component. @Component is a decorator function that specifies the Angular metadata for the component. This can be found in the testcomponent.component.ts file. Within this file, we have three generated metadata properties:</p>

    <ul>
        <li>selector - The component's CSS element selector</li>
        <li>templateUrl - The location of the component's template file</li>
        <li>styleUrls - The location of the component's private CSS styles</li>
    </ul>

    <p>The ngOnInit is a lifecycle hook. Angular calls this shortly after creating a component. It's a good place to put initialization logic.</p>

    <p>You always need to export the component class so you can import it elsewhere.</p>

    <pre>
        <code>
<!-- leave this line empty -->
export class TestcomponentComponent implements OnInit { }
        </code>
    </pre>

    <h3>Display the component</h3>

    <p>To display our Testcomponent, we must add it to the template of the shell AppComponent. Within the testcomponent.component.ts file, we have this code:</p>

    <pre>
        <code>
<!-- leave this line empty -->
// src/app/testcomponent/testcomponent.component.ts

import { Component, OnInit } from '@angular/core';

@Component({
    selector: 'app-testcomponent',
    templateUrl: './testcomponent.component.html',
    styleUrls: ['./testcomponent.component.scss']
})
export class TestcomponentComponent implements OnInit {

    constructor() { }

    ngOnInit() {
    }

}
        </code>
    </pre>

    <p>We use the app-testcomponent selector property value to then import our Testcomponent into our application. Inside the app.component.html file, add the Testcomponent:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;!-- src/app/app.component.html --&gt;
&lt;!--The content below is only a placeholder and can be replaced.--&gt;
&lt;h1&gt;{{ title }}&lt;/h1&gt;
&lt;app-testcomponent&gt;&lt;/app-testcomponent&gt;
        </code>
    </pre>

    <p>The test within the testcomponent.component.html template file will be rendered within our app.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;!-- src/app/testcomponent/testcomponent.component.html --&gt;
&lt;p&gt;
    testcomponent works!
&lt;/p&gt;
        </code>
    </pre>

    <h2>Styling</h2>

    <p>When setting up Angular using Angular CLI, should you choose to use SCSS, a styles.scss file will be generated within the 'src' directory of your project. Within this file you can add global SCSS styles or simply import SCSS partials into your project to add styling to your application.</p>

    <p>Within each component generated you will find a SCSS file. You can add SCSS/CSS code here to add specific styling for the component that will then be transpiled into the main CSS stylesheet.</p>

    <p>The Angular CLI generates an empty styles.css stylesheet should you choose to use CSS in-place of SCSS/Sass. You can add any application-wide styling here.</p>

    <p>Learn more about SCSS and Sass using the <a href="sass-scss.html">documentation notes</a> created.</p>

    <h2>Services</h2>

    <p>A service is used to encapsulate the business logic that can be repeated in most areas of your code. This helps developers to follow the DRY (Don't Repeat Yourself) principle. Services can be called by components and even other services in the app. It's injected into the component's constructor via Dependency Injection (DI). They help to make the application reusable.</p>

    <p>If you are making HTTP requests to fetch remote resources from a server in your component, you should use a service. If this we're to be done in the component itself, each component would be repeating similar code for getting the same resource. We can simply, therefore, use a service wherever we want to call the fetching logic. This is what's called Separation of Concerns. This states that components are not responsible for doing specific tasks (in this case, fetching data), instead the service can do the task and pass the data back to the components.</p>

    <p>As describe previously, we can create a service like so (in this example, named rest):</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate service rest
        </code>
    </pre>

    <p>The service can be located at: src/app/rest.service.ts</p>

    <h2>Directives</h2>
    <!-- https://codeburst.io/a-simple-show-and-hide-password-directive-with-angular-fae7a6bd136 -->

    <p>The three types of directives in Angular 2 are: attribute directives, structural directives, and components. T create a new directive, use the following command:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate directive addPassword
        </code>
    </pre>

    <p>Our src/app directory should look like this:</p>

    <pre>
        <code>
<!-- leave this line empty -->
src /
    app /
        app-password.directive.spec.ts
        app-password.directive.ts
        app.component.scss
        app.component.html
        app.component.spec.ts
        app.component.ts
        app.module.ts
        </code>
    </pre>

    <p>If we are creating an attribute directive, we could add it to an input field like so:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;input type="password" appPassword /&gt;
        </code>
    </pre>

    <h2>Service</h2>
    <!-- https://angular.io/guide/architecture-services -->

    <p>A Service is a broad category encompassing any value, function, or feature that an app needs. It is typically a class with a narrow, well-defined purpose. It should always do something specific and do it well. Angular separates components from services to increase modularity and reusability. Ideally a component's job is to enable the user experience and nothing more.</p>

    <p>Here is an example of a service class that logs to the browser console. Let's create it first:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate service Logger
        </code>
    </pre>

    <p>Here is the code:</p>

    <pre>
        <code>
<!-- leave this line empty -->
export class Logger {
    log(msg: any) {
        console.log(msg);
    }
    error(msg: any) {
        console.error(msg);
    }
    warn(msg: any) {
        console.warn(msg);
    }
}
        </code>
    </pre>

    <p>When you provide the service at the root level, Angular creates a single, shared instance of the service and injects it into any class that asks for it. This can be found in the service file itself.</p>

    <pre>
        <code>
<!-- leave this line empty -->
@Injectable({
    providedIn: 'root'
})
        </code>
    </pre>

    <p>Within the root module (app.module.ts), we want to add the service into the @NgModule providers property. This allows the same instance of a service to be available to all components in that NgModule.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http';
import { RouterModule, Routes } from '@angular/router';
import { NgModule } from '@angular/core';

import { AppComponent } from './app.component';
import { ButtonComponent } from './button/button.component';
import { InputComponent } from './input/input.component';
import { HomeComponent } from './home/home.component';
import { AboutComponent } from './about/about.component';
import { TestComponent } from './test/test.component';
import { PageNotFoundComponent } from './page-not-found/page-not-found.component';

const appRoutes: Routes = [
  {
    path: '',                   // Default path (homepage)
    redirectTo: '/home',
    pathMatch: 'full'
  },
  {
    path: 'home',
    component: HomeComponent
  },
  {
    path: 'about',
    component: AboutComponent
  },
  {
    path: 'test',
    component: TestComponent
  },
  {
    path: '**',
    component: PageNotFoundComponent
  }
];

@NgModule({
  declarations: [
    AppComponent,
    ButtonComponent,
    InputComponent,
    AboutComponent,
    TestComponent,
    PageNotFoundComponent,
    HomeComponent
  ],
  imports: [
    BrowserModule,
    HttpClientModule,
    RouterModule.forRoot(
      appRoutes,
      {
        enableTracing: true
      }
    )
  ],
  providers: [
    Logger
  ],
  bootstrap: [AppComponent]
})
export class AppModule { }
        </code>
    </pre>

    <h2>Connect to API</h2>
    <!-- https://www.djamware.com/post/5b87894280aca74669894414/angular-6-httpclient-consume-restful-api-example -->
    <!-- https://www.techiediaries.com/angular-by-example-httpclient-get/ -->
    <!-- https://www.metaltoad.com/blog/angular-5-making-api-calls-httpclient-service -->
    <!-- https://blog.angular-university.io/angular-http/ -->
    <!-- https://www.techiediaries.com/angular-http-client/ -->
    <!-- https://thinkster.io/tutorials/angular-2-http -->
    <!-- https://fullstack-developer.academy/caching-http-requests-with-angular/ -->
    <!-- https://scotch.io/tutorials/angular-2-http-requests-with-observables -->
    <!-- http://jasonwatmore.com/post/2018/10/29/angular-7-user-registration-and-login-example-tutorial -->
    <!-- https://www.positronx.io/angular-7-httpclient-http-service/ -->

    <p>Front end applications, build using frameworks like Angular, communicate with backend servers through <a href="api.html">REST APIs</a> (which are based on the HTTP protocol) using either the XMLHttpRequest interface or the fetch() API.</p>

    <p>You may want to use a fake server for testing your Angular app. Something like the NPM package json-server could be used for this.</p>

    <p>It is recommended that HTTP calls are wrapped within services instead of being used in Components directly. This allows for greater flexibility for your application structure as you can reuse you calls throughout the app.</p>

    <p>We are using Angular version 7 for our examples.</p>

    <p>Angular HttpClient makes use of the XMLHttpRequest object which also supports older browsers. The HttpClient is available from the @angular/common/http package. This module is already included out-of-the-box with Angular (at least from version 6).</p>

    <p>HTTPClient is used to make calls to remote API servers so you don't need external libraries like Axios or the standard Fetch API. This is an Angular service that's from @angular/common/http.</p>

    <p>The first step is to include the HttpClientModule in your main application module (src/app/app.module.ts). We begin by importing it first:</p>

    <pre>
        <code>
<!-- leave this line empty -->
// src/app/app.module.ts

import { HttpClientModule } from '@angular/common/http';
        </code>
    </pre>

    <p>Next, we need to add this to the 'imports' object of our module also:</p>

    <pre>
        <code>
<!-- leave this line empty -->
imports: [
    BrowserModule,
    HttpClientModule
],
        </code>
    </pre>

    <p>We now want to create a service. This service will be called http and should generate the src/app/http.service.spec.ts (for tests) and src/app/http.service.ts files.</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate service http

# Shorthand
$ ng g s http
        </code>
    </pre>

    <p>This is our service we create:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { Injectable } from '@angular/core';

@Injectable({
    providedIn: 'root'
})
export class HttpService {

    constructor() { }
}
        </code>
    </pre>

    <p>By making a few changes, we can create a very simple Service:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

@Injectable()
export class HttpService {

    constructor(private http: HttpClient) { }

    getProducts() {
        return this.http.get('/api/products');
    }
}
        </code>
    </pre>

    <p>Accessing the service from two separate components means that each time we load a component, a request is made to the API. The service can be updated to make sure that the response is cached.</p>

    <h2>Angular &amp; Firebase</h2>
    <!-- https://medium.com/factory-mind/angular-firebase-typescript-step-by-step-tutorial-2ef887fc7d71 -->
    <!-- https://www.positronx.io/how-to-connect-firebase-realtime-nosql-cloud-database-with-angular-app-from-scratch/ -->
    <!-- https://www.positronx.io/angular-7-firebase-5-crud-operations-with-reactive-forms/ -->
    <!-- http://www.codaffection.com/angular-tutorial/angular-7-crud-with-firestore/ -->

    <p>Firebase is a real-time NoSQL cloud database from Google that allows you to create faster and quicker web or mobile applications and doesn't require server-side backend programming languages.</p>

    <p>You will need to setup a Firebase account to begin. Once your project is set up, click on your project to see your admin dashboard. Navigate to: Develop/Authentication/Web setup, click the Web setup button and a popup should appear with your Firebase credentials.</p>

    <p>Within the Develop section, select 'Database' to create a new database. Set the Security rules to be 'Start in test mode' to have open permissions during testing. This will need to be revised before you put the changes into production. In Firebase, click on the 'Cloud Firebase' button within the 'Database' section and select 'Realtime Database'.</p>

    <p>Don't forget to change your Firebase database rules, go to Database/Rules. Otherwise you won't be able to access the data without authentication.</p>

    <pre>
        <code>
<!-- leave this line empty -->
{
    "rules": {
        ".read": true,
        ".write": true
    }
}
        </code>
    </pre>

    <p>Click the 'Publish' button once changed.</p>

    <p>Once the Firebase setup is done, its time to install AngularFire and Firebase from NPM (Node Package Manager).</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ npm install firebase @angular/fire --save
        </code>
    </pre>

    <p>Its worth noting that tutorials may reference angularfire2 when referring to Firebase, but looking at the NPM documentation, this appears to have now been replaced by <a href="https://www.npmjs.com/package/@angular/fire" target="_blank" rel="noopener noreferre">@angular/fire</a></p>

    <p>Your Firebase credentials should be added to the environment files in your Angular project:</p>

    <ul>
        <li>src/environments/environment.ts</li>
        <li>src/environments/environment.prod.ts</li>
    </ul>

    <p>This is how it should appear (details are not true credentials):</p>

    <pre>
        <code>
<!-- leave this line empty -->
// src/environments/environments.ts

export const environment = {
  production: false,
  firebaseConfig: {
    apiKey: "AIzaSyA5J66XXXXXXXXXXXX",
    authDomain: "applicationname-b005b.firebaseapp.com",
    databaseURL: "https://applicationname-b005b.firebaseio.com",
    projectId: "applicationname-b005b",
    storageBucket: "applicationname-b005b.appspot.com",
    messagingSenderId: "1234567890"
  }
};
        </code>
    </pre>

    <p>Within the 'root' module, app.module.ts, we can import the AngularFireModule and environment:</p>

    <pre>
        <code>
<!-- leave this line empty -->
// Firebase
import { AngularFireModule } from '@angular/fire';
import { environment } from '../environments/environment';
        </code>
    </pre>

    <p>You will need to add the AngularFireModule to the imports property also (we are using 'my-app-name' as the example here):</p>

    <pre>
        <code>
<!-- leave this line empty -->
@NgModule({
    imports: [
        BrowserModule,
        AngularFireModule.initializeApp(environment.firebaseConfig, 'my-app-name')
    ],
        </code>
    </pre>

    <p>Now you should be set to use Firebase with your Angular App.</p>

    <p>If a realtime database has been created in Firebase, we need to import AngularFireDatabaseModule into our 'root' main application module (app.module.ts). This will need to be added to the imports array also.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http';
import { RouterModule, Routes } from '@angular/router';
import { NgModule } from '@angular/core';

// Firebase
import { AngularFireModule } from '@angular/fire';
import { AngularFireDatabaseModule } from '@angular/fire/database';
import { environment } from '../environments/environment';

import { AppComponent } from './app.component';
import { ButtonComponent } from './button/button.component';
import { InputComponent } from './input/input.component';
import { HomeComponent } from './home/home.component';
import { AboutComponent } from './about/about.component';
import { TestComponent } from './test/test.component';
import { PageNotFoundComponent } from './page-not-found/page-not-found.component';

const appRoutes: Routes = [
  {
    path: '',                   // Default path (homepage)
    redirectTo: '/home',
    pathMatch: 'full'
  },
  {
    path: 'home',
    component: HomeComponent
  },
  {
    path: 'about',
    component: AboutComponent
  },
  {
    path: 'test',
    component: TestComponent
  },
  {
    path: '**',
    component: PageNotFoundComponent
  }
];

@NgModule({
  declarations: [
    AppComponent,
    ButtonComponent,
    InputComponent,
    AboutComponent,
    TestComponent,
    PageNotFoundComponent,
    HomeComponent
  ],
  imports: [
    BrowserModule,
    HttpClientModule,
    AngularFireModule.initializeApp(environment.firebaseConfig, 'angular'),  // 'angular' is the Firebase app name
    AngularFireDatabaseModule,
    RouterModule.forRoot(
      appRoutes,
      {
        enableTracing: true
      }
    )
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
        </code>
    </pre>

    <p>This example includes Routing code which we will explain further down the notes.</p>

    <p>Next, create a seperate folder by the name of 'shared' within the the 'src/app' directory of your application. Here we will create crud.service.ts (Service) and student.ts (Interface Class).</p>

    <p>Run the following command to generate student interface class for setting up data types:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ cd src/app
$ mkdir shared
$ cd shared

$ ng generate interface student

# Shorthand
$ ng g i student
        </code>
    </pre>

    <p>Once created, open the student.ts file and add the following code:</p>

    <pre>
        <code>
<!-- leave this line empty -->
export interface Student {
    $key: string;
    firstName: string;
    lastName: string;
    email: string;
    mobileNumber: Number;
}
        </code>
    </pre>

    <p>Now we need to generate a service for CRUD (Create Read Update Delete) in the same shared directory:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate service crud

# Shorthand
$ ng g s crud
        </code>
    </pre>

    <p>This will generate a CRUD service (crud.service.ts). Open the file and add the following code:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { Injectable } from '@angular/core';
import { Student } from '../shared/student';    // Student data type interface class
import { AngularFireDatabase, AngularFireList, AngularFireObject } from '@angular/fire/database';  // Firebase modules for Database, Data list and Single object

@Injectable({
  providedIn: 'root'
})
export class CrudService {

    studentsRef: AngularFireList<any>;  // Reference to Student data list, its an Observable
    studentRef: AngularFireObject<any>; // Reference to Student object, its an Observable too

    // Inject AngularFireDatabase Dependency in Constructor
  constructor(private db: AngularFireDatabase) { }

  // Create Student
  AddStudent(student: Student) {
    this.studentsRef.push({
      firstName: student.firstName,
      lastName: student.lastName,
      email: student.email,
      mobileNumber: student.mobileNumber
    })
  }

  // Fetch Single Student Object
  GetStudent(id: string) {
    this.studentRef = this.db.object('students-list/' + id);
    return this.studentRef;
  }

  // Fetch Students List
  GetStudentsList() {
    this.studentsRef = this.db.list('students-list');
    return this.studentsRef;
  }  

  // Update Student Object
  UpdateStudent(student: Student) {
    this.studentRef.update({
      firstName: student.firstName,
      lastName: student.lastName,
      email: student.email,
      mobileNumber: student.mobileNumber
    })
  }  

  // Delete Student Object
  DeleteStudent(id: string) { 
    this.studentRef = this.db.object('students-list/'+id);
    this.studentRef.remove();
  }
}
        </code>
    </pre>

    <p>We are now able to write out app logic into our components.</p>

    <!-- https://www.positronx.io/angular-7-firebase-5-crud-operations-with-reactive-forms/ - PART 10 -->

    <p>Open up a component, let's pick our test component (test.component.ts). We are going to import our CRUD service into our component:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { CrudService } from '../shared/crud.service';   // CRUD services API
        </code>
    </pre>

    <p>This will need to be added to the constructor also:</p>

    <pre>
        <code>
<!-- leave this line empty -->
constructor(
    public crudApi: CrudService     // CRUD API services
){}
        </code>
    </pre>

    <h2>Angular Routing</h2>
    <!-- https://www.smashingmagazine.com/2018/11/a-complete-guide-to-routing-in-angular/ -->
    <!-- https://angular.io/guide/router -->
    <p>Angular Router is a powerful JavaScript router built and maintained by the Angular core team that can be installed from the @angular/router package. It provides a complete routing library. It is a core part of the Angular platform and enables developers to build Single Page Applications (SPA) with multiple views. This allows navigation between these views.</p>

    <p>When using Angular CLI, it looks like the @angular/router package is installed as a dependency within the package.json file.</p>

    <p>Begin by creating new components, each one will act as a 'page' template. Here, we shall create a component for the 'About' page:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate component About
        </code>
    </pre>

    <p>This will generate a component named 'AboutComponent' and app.module.ts will be update automatically to import this into your Angular application.</p>

    <p>We now need to import the @angular/router library package. This is not part of the Angular core itself, as Angular Router is an optional service. At the top of the app.module.ts file, import the package:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { RouterModule, Routes } from '@angular/router';
        </code>
    </pre>

    <p>The router has no routes until you configure it. Update the app.module.ts file to look like this:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http';
import { RouterModule, Routes } from '@angular/router';
import { NgModule } from '@angular/core';

import { AppComponent } from './app.component';
import { ButtonComponent } from './button/button.component';
import { InputComponent } from './input/input.component';
import { AboutComponent } from './about/about.component';
import { TestComponent } from './test/test.component';
import { PageNotFoundComponent } from './page-not-found/page-not-found.component';

const appRoutes: Routes = [
  {
    path: '',     // Default path (homepage)
    redirectTo: '/about',
    pathMatch: 'full'
  },
  {
    path: 'about',
    component: AboutComponent
  },
  {
    path: 'test',
    component: TestComponent
  },
  {
    path: '**',
    component: PageNotFoundComponent
  }
];

@NgModule({
  declarations: [
    AppComponent,
    ButtonComponent,
    InputComponent,
    AboutComponent,
    TestComponent,
    PageNotFoundComponent
  ],
  imports: [
    BrowserModule,
    HttpClientModule,
    RouterModule.forRoot(
      appRoutes,
      {
        enableTracing: true
      }
    )
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
        </code>
    </pre>

    <p>Create a number of other components to generate our template page files:</p>

    <pre>
        <code>
<!-- leave this line empty -->
$ ng generate component Test
$ ng generate component PageNotFound
        </code>
    </pre>

    <p>Within our HTML view (app.component.html), we will use the RouterOutlet directive from the router library to act as a placeholder. This is where we would like the content of the page templates to be displayed when we navigate through the application routes:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;router-outlet&gt;&lt;/router-outlet&gt;
        </code>
    </pre>

    <p>We can also include links on app.component.html so we can navigate to each page:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;nav&gt;
    &lt;a routerLink="/about" routerLinkActive="active"&gt;About&lt;/a&gt;
    &lt;a routerLink="/test" routerLinkActive="active"&gt;Test&lt;/a&gt;
&lt;/nav&gt;

&lt;router-outlet&gt;&lt;/router-outlet&gt;
        </code>
    </pre>
</main>

</body>
</html>