<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Developer Notes - PHP Basics</title>

    <link rel="shortcut icon" type="image/ico" href="img/favicon/code.ico" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="preload" href="fonts/nunito-v9-latin-regular.woff2" as="font" type="font/woff2" crossorigin />
</head>
<body>

<header class="header" role="banner">
    <nav class="header__inner">
        <ul class="header__item header__item--links">
            <li class="header__link">
                <span class="header__link--background">
                    <a href="index.html">Home</a>
                </span>
            </li>
            <li class="header__link">
                <span class="header__link--background">
                    <a href="#main">Skip to content</a>
                </span>
            </li>
        </ul>
    </nav>
</header>

<main role="main" id="main">
    <h1>PHP Basics</h1>

    <p>PHP (PHP: Hypertext Preprocessor) is an open source, server-side scripting language for making dynamic and interactive web pages. PHP scripts are executed on the server and the result is returned to the browser as plain HTML.</p>

    <p>A PHP file will have the file extension ".php".</p>

    <h2>Basic PHP Syntax</h2>

    <p>A PHP script can be placed anywhere within the document. The script starts with &lt;?php and ends with ?&gt; as this example below demonstrates.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php
    // PHP code goes here
?&gt;
        </code>
    </pre>

    <p>If the PHP code is not being placed within a HTML document and is an external file containing just PHP code, then the closing ?&gt; tag is not needed.</p>

    <p>Like JavaScript, PHP statements end with a semicolon ( ; ).</p>

    <h2>Variables</h2>

    <p>Variables are "containers" for storing data/information. In PHP, a variable starts with the $ sign, followed by the name of the variable. Unlike other programming languages, PHP has no command for declaring a variable. It is created the moment you assign a value to it.</p>

    <p>We do not have to tell PHP which data type the variable is. PHP automatically converts the variable to the correct data type based on its value. This is because PHP is a loosely typed language. In other languages such as C, C++, and Java, the developer must declare the name and type of the variable before it can be used.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php

$text = "Hello, World";
$a = 2;
$b = true;

?&gt;
        </code>
    </pre>

    <p>The PHP echo statement is often used to output data to the screen.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php

$text = "Hello, World";
echo "Welcome and $text!";      // Welcome and Hello, World!

?&gt;
        </code>
    </pre>

    <p>The following example will produce the same output as the example above:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php

$text = "Hello, World";
echo "Welcome and " . $text . "!";      // Welcome and Hello, World!

?&gt;
        </code>
    </pre>

    <p>The following example will output the sum of two variables:</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php

$x = 5;
$y = 4;
echo $x + $y;   // 9

?&gt;
        </code>
    </pre>

    <h2>Functions</h2>

    <p>The real power of PHP comes from its functions. Besides the built-in functions in PHP, we can create our own functions.</p>

    <p>A function is a block of statements that can be used repeatedly in a program. It will not be executed immediately on page load, but can be executed by a call to the function.</p>

    <p>A user-defined function declaration starts with the word 'function'. It is recommended to name the function with a name that reflects what the function does.</p>

    <pre>
        <code>
<!-- leave this line empty -->
function functionName() {
    // Code to be executed
}
        </code>
    </pre>

    <p>We can then call the function, like so:</p>

    <pre>
        <code>
<!-- leave this line empty -->
functionName();
        </code>
    </pre>

    <p>Information can be passed to functions through arguments. An argument is just like a variable. Arguments are specified after the function name, when it is being called, and this can then be passed into the function parameters.</p>

    <p>The following example has a function with one parameter - $fname. When the function is called, we also pass along a name and the name can then be used inside the function.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php

function sayGreeting($name) {
    echo "Welcome $name. &lt;br/&gt;";
}

// Call the function
sayGreeting("Dan");
sayGreeting("Matt");
sayGreeting("Cassie");

?&gt;
        </code>
    </pre>

    <p>The following example has a function with two parameters.</p>

    <pre>
        <code>
<!-- leave this line empty -->
&lt;?php

function sayGreeting($name, $surname) {
    echo "Welcome $name $surname. &lt;br/&gt;";
}

// Call the function
sayGreeting("Dan", "Smith");
sayGreeting("Matt", "Smith");
sayGreeting("Cassie", "Doe");

?&gt;
        </code>
    </pre>

    <h2>PHP Login Example</h2>

    <pre>
        <code>
<!-- leave this line empty -->
// logout.php

&lt;?php
    // Need to get current sessions
    session_start();
    session_unset();
    // Destroy the session
    session_destroy();
    // Redirect to hello.php
    header("Location: hello.php");
?&gt;
        </code>
    </pre>

    <pre>
        <code>
<!-- leave this line empty -->
// page2.php

&lt;?php
// Start the session
session_start();

// Check if the 'login' session exists
if (!isset($_SESSION['login'])) {
    // Not logged in
    header('Location: hello.php');
    exit();
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;title&gt;PHP learning - page 2&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;p&gt;&lt;a href="logout.php"&gt;Logout&lt;/a&gt;&lt;/p&gt;

&lt;?php
// Output the username session value from the previous page
echo "Welcome, " . $_SESSION['username'] . ".&lt;br/&gt;";
echo $_GET['age'] . "&lt;br/&gt;";
echo "Today is " . date("Y/m/d") . "&lt;br/&gt;";
?&gt;

&lt;/body&gt;
&lt;/html&gt;
        </code>
    </pre>

    <pre>
        <code>
<!-- leave this line empty -->
// hello.php

&lt;?php
// Start the session
session_start();
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;title&gt;PHP learning&lt;/title&gt;

&lt;style&gt;
.error {
    color: red;
}
&lt;/style&gt;

&lt;/head&gt;
&lt;body&gt;

&lt;!--
Having an empty action attribute will post to the same page
Setting the action to a page would move the user to that page on submit
--&gt;
&lt;form action="" method="post"&gt;
    &lt;input type="text" name="uname" placeholder="username" /&gt;
    &lt;input type="submit" name="Submit" value="Submit" /&gt;
&lt;/form&gt;

&lt;?php
if (isset($_POST['Submit'])) { 
    // Set form input entered to be the session 'username'
    $_SESSION['username'] = $_POST['uname'];
    // Set login session
    $_SESSION['login'] = 'true';
}
?&gt; 

&lt;p&gt;
    &lt;!-- Output the value of the username session when the form is submitted --&gt;
    &lt;strong&gt;&lt;?php echo "Username: " . $_SESSION['username'];?&gt;&lt;/strong&gt;
&lt;/p&gt;

&lt;p&gt;
    &lt;a href="page2.php?name=Dan&age=32"&gt;Next &gt;&lt;/a&gt;
&lt;/p&gt;

&lt;?php
// define variables
// Input field values are empty unless user enters a value and clicks submit button
$firstname = '';
$email = '';

// define variables and set error messages to be empty value by default
$firstnameErr = "";
$emailErr = "";

if (isset($_POST['Validate'])) { 

    if (empty($_POST['firstname'])) {
        $firstnameErr = "Firstname is required";
    } else {
        $firstname = test_input($_POST['firstname']);

        // Regex
        if (!preg_match("/^[a-zA-Z ]*$/", $firstname)) {
            $firstnameErr = "Only letters and white space allowed";
        }
    }

    if (empty($_POST['email'])) {
        // Error message if email is empty
        $emailErr = "Email is required";
    } else {
        // Call the test_input function
        // This will get the value from the email input field
        // Will also populate the value attribute in the input field
        $email = test_input($_POST['email']);

        // check if e-mail address is well-formed
        if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
            $emailErr = "invalid email format";
        }
    }
}

// Validate input to prevent security issues
function test_input($data) {
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    return $data;
}
?>

&lt;?php
$servername   = "localhost";
$database = "testdb";
$username = "admin";
$password = "password";

// Create connection
$conn = new mysqli($servername, $username, $password);
// Check connection
if ($conn->connect_error) {
   die("Connection failed: " . $conn->connect_error);
}
  echo "Connected successfully!!!";
?&gt;

&lt;!-- Validation test --&gt;
&lt;form action="" method="post"&gt;
    &lt;label for="email"&gt;First name *:&lt;/label&gt;&lt;br/&gt;
    &lt;!-- Keep the value entered in the input field --&gt;
    &lt;input type="text" name="firstname" value="&lt;?php echo $firstname; ?&gt;" /&gt;&lt;br/&gt;
    &lt;!-- Error message --&gt;
    &lt;p&gt;&lt;span class="error"&gt;&lt;?php echo $firstnameErr; ?&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;label for="email"&gt;Email *:&lt;/label&gt;&lt;br/&gt;
    &lt;input type="text" name="email" value="&lt;?php echo $email; ?&gt;" /&gt;&lt;br/&gt;
    &lt;!-- Error message --&gt;
    &lt;p&gt;&lt;span class="error"&gt;&lt;?php echo $emailErr; ?&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;input type="submit" name="Validate" value="Validate" /&gt;
&lt;/form&gt;

&lt;?php
// Output the email address
// echo $email;
?&gt;

&lt;?php
echo 'Hello ' . htmlspecialchars($_GET["name"]) . '!';
?&gt;

&lt;/body&gt;
&lt;/html&gt;
        </code>
    </pre>
</main>

</body>
</html>