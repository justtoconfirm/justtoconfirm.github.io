<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Developer Notes - React: Data</title>

    <link rel="shortcut icon" type="image/ico" href="img/favicon/code.ico" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="preload" href="fonts/nunito-v9-latin-regular.woff2" as="font" type="font/woff2" crossorigin />
</head>
<body>

<header class="header" role="banner">
    <nav class="header__inner">
        <ul class="header__item header__item--links">
            <li class="header__link">
                <span class="header__link--background">
                    <a href="index.html">Home</a>
                </span>
            </li>
            <li class="header__link">
                <span class="header__link--background">
                    <a href="#main">Skip to content</a>
                </span>
            </li>
        </ul>
    </nav>
</header>

<main role="main" id="main">
    <h1>React: Data</h1>

    <p>Most modern web applications make use of the <a href="https://searchapparchitecture.techtarget.com/definition/REST-REpresentational-State-Transfer" target="_blank" rel="noopener noreferrer">REST</a> Protocol to communicate with each other. To achieve this, data is sent as JSON (JavaScript Object Notation) to the <abbr title="Application Programming Interface">API</abbr>. In turn, the API returns a JSON payload which can be static or dynamic data.</p>

    <div class="note">
        <p>When fetching data in React, the componentDidMount() lifecycle method is the best place to fetch data.</p>
    </div>

    <p>Here are a few useful APIs:</p>

    <ul>
        <li><a href="http://jsonplaceholder.typicode.com/users" target="_blank" rel="noopener noreferrer">http://jsonplaceholder.typicode.com/users</a></li>
        <li><a href="https://api.github.com" target="_blank" rel="noopener noreferrer">https://api.github.com</a></li>
        <li><a href=" https://ghibliapi.herokuapp.com/films" target="_blank" rel="noopener noreferrer">https://ghibliapi.herokuapp.com/films</a></li>
    </ul>

    <h2>Create a simple component</h2>

    <p>We're going to being by using the ES6 arrow function to create simple components. First, a table header.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React from 'react'

const TableHeader = () => {
    return (
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Name&lt;/th&gt;
                &lt;th&gt;Job&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
    )
}

export default TableHeader
        </code>
    </pre>

    <p>The table body can then be created.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React from 'react'

const TableBody = () => {
    return (
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;Charlie&lt;/td&gt;
                &lt;td&gt;Janitor&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Mac&lt;/td&gt;
                &lt;td&gt;Bouncer&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Dee&lt;/td&gt;
                &lt;td&gt;Actress&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    )
}

export default TableBody
        </code>
    </pre>

    <p>A class component is created that will render our table.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React, { Component } from 'react'

import TableHeader from './TableHeader'
import TableBody from './TableBody'

class Table extends Component {
    render() {
        return(
            &lt;table&gt;
                &lt;TableHeader /&gt;
                &lt;TableBody /&gt;
            &lt;/table&gt;
        )
    }
}

export default Table
        </code>
    </pre>

    <p>Right now we have a Table component, but the data is being hard-coded. One of the main benefits of using React is how it handles data, it does so with properties - referred to as props - and with state.</p>

    <p>Let's now remove all the data from our TableBody component.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React from 'react'

const TableBody = () => {
    return &lt;tbody /&gt;
}

export default TableBody
        </code>
    </pre>

    <p>All our data can now be moved to an array of objects, as if we were bringing in a JSON-based API. We will have to create this array inside our render() method.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React, { Component } from 'react'

import Table from './Table'

class App extends Component {
    render() {
        const characters = [
        {
            name: 'Charlie',
            job: 'Janitor',
        },
        {
            name: 'Mac',
            job: 'Bouncer',
        },
        {
            name: 'Dee',
            job: 'Actress',
        },
    ]

    return (
        &lt;div className="container"&gt;
            &lt;Table /&gt;
        &lt;/div&gt;
    )
  }
}

export default App
        </code>
    </pre>

    <p>Now we're going to pass the data through to the child component of Table using props (properties). We can call the property whatever we want as long as it's not a reserved keyword. In our example, the prop is called characterData. The data being passed through is the characters variable. This is placed between curly braces as it's a JavaScript expression.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React, { Component } from 'react'

import Table from './Table'

class App extends Component {
    render() {
        const characters = [
        {
            name: 'Charlie',
            job: 'Janitor',
        },
        {
            name: 'Mac',
            job: 'Bouncer',
        },
        {
            name: 'Dee',
            job: 'Actress',
        },
    ]

    return (
        &lt;div className="container"&gt;
            &lt;Table characterData={characters} /&gt;
        &lt;/div&gt;
    )
  }
}

export default App
        </code>
    </pre>

    <p>Now that the data is being passed through to our Table component, we have to work on accessing it from the other side.</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React, { Component } from 'react'

import TableHeader from './TableHeader'
import TableBody from './TableBody'

class Table extends Component {
    render() {

        const { characterData } = this.props

        return(
            &lt;table&gt;
                &lt;TableHeader /&gt;
                &lt;TableBody characterDate={characterData} /&gt;
            &lt;/table&gt;
        )
    }
}

export default Table
        </code>
    </pre>

    <div class="note">
        <p>If you open React DevTools and inspect the Table component, you'll see the array of data in the property. The data that's stored here is known as the virtual DOM, which is a fast and efficient way of syncing data with the actual DOM.</p>

        <p>This data is not in the actual DOM yet, however.</p>
    </div>

    <p>Here is a further example to demonstrate how to render JSON data within an application. Update the index.js file with the following example:</p>

    <pre>
        <code>
<!-- leave this line empty -->
import React from 'react'
import { render } from 'react-dom'

// Data
const data = [
    {
        "ingredients": [
            {
                "name": "Salmon"
            },
            {
                "name": "Butter Lettuce"
            }
        ]
    }
]

// Menu Component
const Menu = ({ recipes }) =&gt;
    &lt;React.Fragment&gt;
        {recipes.map((recipe, i) =&gt;
            &lt;Recipe key={i} {...recipe} /&gt;
        )}
    &lt;/React.Fragment&gt;

// Recipe Component
const Recipe = ({ ingredients, name }) =&gt;
    &lt;React.Fragment&gt;
        &lt;ul&gt;
            {ingredients.map((ingredient, i) =&gt; 
                &lt;li key={i}&gt;{ingredient.name}&lt;/li&gt;
            )}
        &lt;/ul&gt;
    &lt;/React.Fragment&gt;

render(
    &lt;Menu recipes={data} /&gt;,
    document.getElementById('app')
)
        </code>
    </pre>

    <h2>Useful Links</h2>

    <ul>
        <li><a href="https://pusher.com/tutorials/consume-restful-api-react" target="_blank" rel="noopener noreferrer">Consume Restful APIs with React</a></li>
        <li><a href="https://github.com/fisayoafolayan/consuming-restful-api-in-react/tree/master/src" target="_blank" rel="noopener noreferrer">Consume Restful APIs with React: GitHub repository</a></li>
        <li><a href="https://github.com/babel/babel/issues/8655" target="_blank" rel="noopener noreferrer">Babel: Support for experimental 'classProperties' syntax</a></li>
        <li><a href="https://www.robinwieruch.de/react-fetching-data" target="_blank" rel="noopener noreferrer">React: Fetching Data</a></li>
    </ul>
</main>

</body>
</html>